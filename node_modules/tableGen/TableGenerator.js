var events = require('events');

var teamList = ['Ferrari','McLaren','Jordan','Stewart','Williams','Benetton','Prost','Sauber','Arrows','Minardi','Bar','?!@#*#$%?#@#^^!&$#@'];

var debug = false;

function randomInt (low, high) {
    return Math.floor(Math.random() * (high - low) + low);
}

function TableGenerator(callback) {
    this.ee = new events.EventEmitter();
    this.ee.on('rowPrepared', callback);
}

TableGenerator.prototype.renderListRows = function renderListRows(list, n) {

    if (n < list.length) {
        if (debug){
            console.trace("Here I am!")
        }
        this.ee.emit('rowPrepared', list[n]);
        setTimeout(this.renderListRows.bind(this, list, n+1), randomInt(3000, 7000));
    }
    else {
        console.log("end list");
    }
}

TableGenerator.prototype.generate = function generate() {
    this.renderListRows(teamList, 0);
}

module.exports = TableGenerator;